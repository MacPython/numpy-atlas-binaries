language:
  - objective-c

env:
  matrix:
    - PY_VERSION=2.7.7 PACKAGES=numpy
    - PY_VERSION=2.7.7 PACKAGES=scipy
    - PY_VERSION=3.3.5 PACKAGES=numpy
    - PY_VERSION=3.3.5 PACKAGES=scipy
    - PY_VERSION=3.4.1 PACKAGES=numpy
    - PY_VERSION=3.4.1 PACKAGES=scipy

install:
  - set -vx  # echo commands
  - source ./testing/install.sh

script:
  - echo $PWD
  - mkdir tmp_test_dir
  - cd tmp_test_dir
  - source ../testing/test.sh

after_failure:
  - echo $PWD

before_deploy: cd build/wheelhouse
deploy:
  provider: cloudfiles
  username: travis-worker
  api_key:
    secure: U+rKEiR6sQ+vsTJt3MuqqZwWvPV4gkjnQvzeR6cP9JZpfvkKuaa+vcgj7OngZ69DUgFTzRiTnFAxCbArGpDUkbP9V+kX5UgkePMdxhK+j9V0UOo8g+QwZtlqmV78pTXemWndwbqcy0uyfxuBpxhPXGSAHuzk+pZUbhH2zSEfh0s=
  region: ORD
  container: wheels
  skip_cleanup: true
